{% extends 'base.html' %}

{% block title %}Agendamento{% endblock %}

{% block content %}

<div class="container mt-4" style="max-width: 700px;">
  <div class="card shadow-sm border-0">
    <div class="card-body bg-white">
      <form method="POST" action="{{ url_for('novo_agendamento') }}">
      <div class="mb-3">
          <label for="cliente_id" class="form-label">Cliente</label>
          <select name="cliente_id" class="form-select" required>
            {% for c in clientes %}
              <option value="{{ c.id }}" {% if agendamento and agendamento.cliente_id == c.id %}selected{% endif %}>{{ c.nome }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="mb-3">
          <label for="profissional_id" class="form-label">Profissional</label>
          <select name="profissional_id" class="form-select" required>
            {% for p in profissionais %}
              <option value="{{ p.id }}" {% if agendamento and agendamento.profissional_id == p.id %}selected{% endif %}>{{ p.nome }}</option>
            {% endfor %}
          </select>
        </div>
        <!-- Serviço -->
          <div class="mb-3">
              <label for="servico_id" class="form-label"><i class="fas fa-cut me-1"></i> Serviço</label>
              <select name="servico_id" id="servico_id" class="form-select" required>
                  {% for s in servicos %}
                      <option value="{{ s.id }}" {% if agendamento and agendamento.servico_id == s.id %}selected{% endif %}>{{ s.nome }}</option>
                  {% endfor %}
              </select>
          </div>

      <div class="row">
          <div class="col-md-6 mb-3">
            <label for="data" class="form-label">Data</label>
            <input type="date" class="form-control" name="data" required value="{{ agendamento.data if agendamento else '' }}">
          </div>
          <div class="col-md-6 mb-3">
            <label for="hora" class="form-label">Hora</label>
            <input type="time" class="form-control" name="hora" required value="{{ agendamento.hora if agendamento else '' }}">
          </div>
        </div>
        <div class="mb-3">
          <label for="valor_pago" class="form-label">Valor Pago</label>
          <input type="number" step="0.01" class="form-control" name="valor_pago" value="{{ agendamento.valor_pago if agendamento else '' }}">
        </div>
        <div class="mb-3">
          <label for="forma_pagamento" class="form-label">Forma de Pagamento</label>
          <select name="forma_pagamento" class="form-select">
            <option value="pix">Pix</option>
            <option value="cartao_debito">Cartão de Débito</option>
            <option value="cartao_credito">Cartão de Crédito</option>
            <option value="dinheiro">Dinheiro</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="status" class="form-label">Status</label>
          <select name="status" class="form-select">
            <option value="agendado" {% if agendamento and agendamento.status == 'agendado' %}selected{% endif %}>Agendado</option>
            <option value="concluido" {% if agendamento and agendamento.status == 'concluido' %}selected{% endif %}>Concluído</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="observacao" class="form-label">Observações</label>
          <textarea name="observacao" class="form-control" rows="3">{{ agendamento.observacao if agendamento else '' }}</textarea>
        </div>
        <div class="d-flex justify-content-between mt-4">
          <a href="{{ url_for('listar_agendamentos') }}" class="btn btn-secondary" style="background-color: #a03e3e;">Cancelar</a>
          <button type="submit" class="btn" style="background-color: #a03e3e; color: white;">Salvar</button>
        </div>
      </form>
    </div>
  </div>
</div>

{% endblock %}
